/*! For license information please see main.7eeb8fd6f99a1e10f650.js.LICENSE.txt */
"use strict";(self.webpackChunkmichael_ai=self.webpackChunkmichael_ai||[]).push([[179],{1769:(t,e,n)=>{var r=n(745),o=n(8028),i=n(9887),a=n(7294);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function f(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new P(o||[]);return r(a,"_invoke",{value:E(t,n,c)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function h(){}function y(){}function v(){}var m={};s(m,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&n.call(b,i)&&(m=b);var x=v.prototype=h.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function o(r,i,a,u){var l=p(t[r],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function E(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=p(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return y.prototype=v,r(x,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(k.prototype),s(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(x),s(x,l,"Generator"),s(x,i,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function l(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,c,"next",t)}function c(t){l(i,r,o,a,c,"throw",t)}a(void 0)}))}}function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var y,v,m,g=(0,a.createContext)(),b=function(t){var e="Bearer ".concat("4nUfi9YxCZz91IRumObdrvD46aDt39IJ4F0np9VfxWn3caQ89Z1!Gf!7ivDvt-RaxZpQDRSSDokUDuKd7-PS0piEjX-JXNhKIQ6YgOnhpwpcvC2FBb=TYY5OWS2gR==oko57qoFZg=zj8r4!!4u2gA=i0Qj7VpDcvnHfml0K-lMKpkL7oAd9SpPRPjVliDB9au5Altk73l?KFuE9=VQJngiaHDxu1/5=MMbUvDYtYrItV0mWy!gQWDR1BxHP78kf"),n="chelsie",r=p((0,a.useState)(!1),2),o=r[0],i=r[1],c=p((0,a.useState)([]),2),l=c[0],d=c[1],h=function(){var t=s(u().mark((function t(r){var o,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,fetch("https://xn--yp9h.xn--dx8h.to/webhook/michael-ai"+"/gpt?user=".concat(n),{headers:{Authorization:e,"Content-Type":"application/json; charset=utf-8"},method:"POST",body:JSON.stringify({prompt:r})});case 3:return o=t.sent,t.next=6,o.text();case 6:a=t.sent,i(!1),d((function(t){return[].concat(f(t),[{role:"assistant",content:a}])}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=s(u().mark((function t(){var r,o,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://xn--yp9h.xn--dx8h.to/webhook/michael-ai"+"/history?user=".concat(n),{headers:{Authorization:e}});case 2:return r=t.sent,t.next=5,r.json();case 5:o=t.sent,(i=o.messages)&&d(i.map((function(t){return JSON.parse(t)})));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=s(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,fetch("https://xn--yp9h.xn--dx8h.to/webhook/michael-ai"+"/history?user=".concat(n),{headers:{Authorization:e},method:"DELETE"});case 4:200!==t.sent.status&&d(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d(r);case 11:i(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return(0,a.useEffect)((function(){y()}),[]),a.createElement(g.Provider,{value:{list:l,loading:o,update:function(t){d((function(e){return[].concat(f(e),[{role:"user",content:t}])})),h(t)},clear:function(){v(l),d([])}}},t.children)},x=n(2788);function w(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var k,E,O,j=(0,x.F4)(y||(y=w(["\n    0%    {-webkit-mask-position: 0% 0%  ,50% 0%  ,100% 0%  }\n    16.67%{-webkit-mask-position: 0% 100%,50% 0%  ,100% 0%  }\n    33.33%{-webkit-mask-position: 0% 100%,50% 100%,100% 0%  }\n    50%   {-webkit-mask-position: 0% 100%,50% 100%,100% 100%}\n    66.67%{-webkit-mask-position: 0% 0%  ,50% 100%,100% 100%}\n    83.33%{-webkit-mask-position: 0% 0%  ,50% 0%  ,100% 100%}\n    100%  {-webkit-mask-position: 0% 0%  ,50% 0%  ,100% 0%  }\n"]))),S=(0,x.F4)(v||(v=w(["\n    0%,\n    100%{background-position: 0%   0%,0%   100%}\n    25% {background-position: 100% 0%,0%   100%}\n    50% {background-position: 100% 0%,100% 100%}\n    75% {background-position: 0%   0%,100% 100%}\n"]))),P=x.ZP.div(m||(m=w(["\n    /* the colors */\n    --c1: #F77825;\n    --c2: #D3CE3D;\n    --c3: #60B99A;\n    --c4: #554236;\n    /**/\n\n    width: 32px; /* control the size */\n    aspect-ratio: 8/5;\n    --_g: no-repeat radial-gradient(#000 68%,#0000 71%);\n    -webkit-mask: var(--_g),var(--_g),var(--_g);\n    -webkit-mask-size: 25% 40%;\n    background: \n        conic-gradient(var(--c1) 50%,var(--c2) 0) no-repeat,\n        conic-gradient(var(--c3) 50%,var(--c4) 0) no-repeat;\n    background-size: 200% 50%;\n    animation: \n        "," 2s infinite steps(1),\n        "," 1s infinite;\n"])),S,j);function L(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var A,z,_=function(){var t=(0,a.useContext)(g),e=t.list,n=t.loading;return a.createElement(D,null,n?a.createElement(C,null,a.createElement(P,null)):null,e.slice().reverse().map((function(t,e){var n=t.role,r=t.content;return a.createElement(Z,{key:e,role:n},r)})))},D=x.ZP.div(k||(k=L(["\n    flex: 1;\n    width: 100%;\n    background: rgb(47, 48, 49);\n    display: flex;\n    flex-direction: column-reverse;\n    overflow-y: scroll;\n"]))),Z=x.ZP.div(E||(E=L(["\n    align-self: ",";\n    padding: 8px;\n    margin: 12px;\n    max-width: 66%;\n    border-radius: 4px;\n    white-space: pre-line;\n\n    background: white;\n    box-shadow: 0 8px 8px -4px rgb(226, 222, 219);\n"])),(function(t){return"assistant"===t.role?"flex-start":"flex-end"})),C=(0,x.ZP)(Z)(O||(O=L(["\n    align-self: flex-start;\n    padding-right: 48px;\n    display: grid;\n    place-content: center;\n"])));function I(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var F,N,T=function(t){return a.createElement(G,t,a.createElement(Y,null,t.children))},G=x.ZP.button(A||(A=I(["\n    cursor: ",";\n    display: flex;\n    flex-direction: column;\n    background: ",";\n    opacity: ",";\n    padding: 3px;\n    margin: 4px;\n    border-radius: 4px;\n    border: none;\n"])),(function(t){return t.disabled?"normal":"pointer"}),(function(t){return t.disabled?"lightgrey":"linear-gradient(to right, rgb(155, 53, 21), orange)"}),(function(t){return t.disabled?"0.3":"1"})),Y=x.ZP.div(z||(z=I(["\n    flex: 1;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    background: rgb(47, 48, 49);\n    color: white;\n    padding: 4px 14px;\n    border-radius: 4px;\n    font-size: 14px;\n"]))),J=n(6348);function R(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var K=x.ZP.div(F||(F=R(["\n    display: flex;\n    flex-direction: column;\n    background: linear-gradient(to right, rgba(155, 53, 21, 0.3), rgba(155, 53, 21, 0.8));\n    padding: 3px;\n    margin: 4px;\n    border-radius: 4px;\n"]))),M=(0,x.ZP)(J.Z)(N||(N=R(["\n    flex: 1;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    background: rgb(47, 48, 49);\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    border: none;\n"])));const Q=n.p+"7566361c9b8e52d05f786eeb8d4ab89d.svg";var V,B,U;function W(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $,X,q,tt=function(){var t,e,n=(0,i.$G)().t,r=(0,a.useContext)(g),o=r.list,c=r.loading,u=r.update,l=r.clear,s=(t=(0,a.useState)(""),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],p=s[1],d=function(){u(f),p("")};return a.createElement(et,null,a.createElement(nt,{placeholder:n("say something..."),draggable:"false",minRows:"2",value:f,onKeyDown:function(t){"Enter"!==t.key||c||(t.preventDefault(),t.stopPropagation(),d())},onChange:function(t){return p(t.target.value)}}),a.createElement(T,{disabled:c,onClick:function(){return d()}},n("Send")),a.createElement(rt,{disabled:c||0===o.length,onClick:function(){return l()}},a.createElement("img",{height:"24px",width:"24px",src:Q})))},et=x.ZP.div(V||(V=W(["\n    display: flex;\n    flex-direction: row;\n    background: rgb(47, 48, 49);\n"]))),nt=(0,x.ZP)((function(t){return a.createElement(K,{style:t.style,className:t.className},a.createElement(M,t))}))(B||(B=W(["\n    flex: 1;\n"]))),rt=x.ZP.button(U||(U=W(["\n    cursor: ",";\n    filter: ",";\n    padding: 0 14px;\n    margin: 2.5px 4px;\n    background: none;\n    border: solid 4px transparent;\n\n    & > img {\n        border-radius: 4px;\n    }\n\n    &:hover {\n        border-color: rgba(0,0,0,0.07);\n        border-radius: 4px;\n    }\n"])),(function(t){return t.disabled?"normal":"pointer"}),(function(t){return t.disabled?"grayscale(0.9)":"grayscale(0)"})),ot=function(){return a.createElement(it,{onClick:function(){!0===confirm("Are you sure you would like to exit Michael AI?")&&chrome.storage.local.remove("location",(function(){chrome.action.setPopup({popup:"./popup.html"}),window.location.href="../popup.html"}))}})},it=x.ZP.button($||(X=["\n    cursor: pointer;\n    position: absolute;\n    top: 16px;\n    right: 32px;\n    height: 20px;\n    width: 20px;\n    border: none;\n    background: none;\n\n    &:before,&:after {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 5px;\n        height: 20px;\n        background-color: #F0F0F0;\n        transform: rotate(45deg) translate(-50%, -50%);\n        transform-origin: top left;\n        content: '';\n    }\n\n    &:after {\n        transform: rotate(-45deg) translate(-50%, -50%);\n    }\n"],q||(q=X.slice(0)),$=Object.freeze(Object.defineProperties(X,{raw:{value:Object.freeze(q)}}))));const at=JSON.parse('{"translation":{"Send":"Send","say something...":"say something..."}}'),ct=JSON.parse('{"translation":{"Send":"发送","say something...":"想说点什么？"}}');o.ZP.use(i.Db).init({resources:{en:at,zh:ct},fallbackLng:"en",interpolation:{escapeValue:!1}});let ut=document.createElement("div");ut.id="app",document.body.style.margin="0",document.body.style.position="relative",document.body.style.width="30rem",document.body.style.height="35rem",document.body.appendChild(ut),ut.style.height="100vh",ut.style.display="flex",ut.style.flexDirection="column",(0,r.s)(ut).render(a.createElement(b,null,a.createElement(ot,null),a.createElement(_,null),a.createElement(tt,null)))}},t=>{var e=e=>t(t.s=e);t.O(0,[216],(()=>(e(6124),e(1769)))),t.O()}]);